(()=>{"use strict";var e={463:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},456:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deleteChecklistItem=t.renameChecklistItem=t.addChecklistItem=void 0;const o=n(607),i=n(143),c=r(n(289));t.addChecklistItem=function(e){const t=document.querySelector("#new-checklist"),n=e.currentTarget,r=n.parentElement?.dataset.id,l=e=>{null!=r&&function(e,t){const n=e.target,r=new FormData(n).get("content");if(null==r)return;const l=(0,c.default)();o.projectList.getProject(l).getItem(t).addChecklistItem(r),o.projectList.save(),(0,i.listTodos)(l),n.reset()}(e,r)};t.showModal(),t.addEventListener("submit",l,{once:!0}),t.addEventListener("close",(e=>{e.currentTarget?.removeEventListener("submit",l)}))},t.renameChecklistItem=function(e){const t=document.querySelector("#edit-checklist"),n=e.currentTarget,r=n.parentElement?.dataset.id,l=n.parentElement?.dataset.index,d=e=>{null!=r&&null!=l&&function(e,t,n){const r=e.target,l=new FormData(r).get("content");if(null==l)return;const d=(0,c.default)();o.projectList.getProject(d).getItem(t).findChecklistItem(n).text=l,o.projectList.save(),(0,i.listTodos)(d),r.reset()}(e,r,parseInt(l))},s=t.querySelector("input"),a=n.parentElement?.querySelector("label")?.textContent;null!=s&&null!=a&&(s.value=a),s?.addEventListener("focus",(()=>{s.selectionStart=s.selectionEnd=s.value.length})),t.showModal(),t.addEventListener("submit",d,{once:!0}),t.addEventListener("close",(e=>{e.currentTarget?.removeEventListener("submit",d)}))},t.deleteChecklistItem=function(e){const t=e.currentTarget,n=t.parentElement?.dataset.id,r=t.parentElement?.dataset.index,l=(0,c.default)();if(confirm("Are you sure?")&&"string"==typeof r&&"string"==typeof n)return o.projectList.getProject(l).getItem(n).removeChecklistItem(parseInt(r)),o.projectList.save(),void(0,i.listTodos)(l);console.error("Something went wrong")}},395:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectList=t.Project=t.TodoItem=void 0;class n{title;description;dueDate;dateStarted;priority;notes;checklist;id;done;constructor({title:e,description:t,dueDate:n,dateStarted:r,priority:o,notes:i="",checklist:c=[],id:l,done:d}){this.title=e,this.description=t,this.dueDate=n,this.dateStarted=r??new Date,this.priority=o,this.notes=i,this.checklist=c,this.id=l,this.done=d}checkTodo(){this.done=!0}uncheckTodo(){this.done=!1}updateFields(e){this.title=e.title,this.description=e.description,this.dueDate=e.dueDate,this.dateStarted=e.dateStarted??this.dateStarted,this.priority=e.priority,this.notes=e.notes}updataNotes(e){this.notes=e}addChecklistItem(e){const t=this.checklist.length,n={index:0===t?0:this.checklist[t-1].index+1,text:e,completed:!1};this.checklist.push(n)}removeChecklistItem(e){const t=this.findChecklistItem(e),n=this.checklist.indexOf(t);this.checklist.splice(n,1)}checklistCheckItem(e){const t=this.checklist.filter((t=>t.index===e));if(t.length>1)throw new Error(`${this.title}: 2 or more checklist items appear to have the same index (${e})`);t[0].completed=!0}checklistUncheckItem(e){const t=this.checklist.filter((t=>t.index===e));if(t.length>1)throw new Error(`${this.title}: 2 or more checklist items appear to have the same index (${e})`);t[0].completed=!1}findChecklistItem(e){const t=this.checklist.filter((t=>t.index===e));if(t.length>1)throw new Error(`${this.title}: 2 or more checklist items appear to have the same index (${e})`);return t[0]}}t.TodoItem=n;class r{title;id;items;constructor(e,t){this.title=e,this.id=t,this.items=[]}addItem(e){this.items.push(e),this.sortByPriority()}removeItem(e){const t=this.items.filter((t=>t.id===e));if(t.length>1)throw new Error(`${t.length} todo items have the same id`);const n=this.items.indexOf(t[0]);this.items.splice(n,1)}getItem(e){const t=this.items.filter((t=>t.id===e));if(t.length>1)throw new Error("More than 1 items with the same id");return t[0]}sortByPriority(){const e={high:2,normal:1,low:0};this.items.sort(((t,n)=>e[n.priority]-e[t.priority]))}}t.Project=r,t.ProjectList=class{items=[];fromJSON(e){if(null==e)return void console.error("ProjectList: cannot convert null to json");const t=JSON.parse(e),o=[];try{t.items.forEach((e=>{const t=new r(e.title,e.id);e.items.forEach((e=>{t.addItem(new n(e))})),o.push(t)}))}catch{throw new Error("Import failed. Incorrect import file format")}this.clear(),localStorage.clear(),o.forEach((e=>{this.addProject(e)})),this.save()}addProject(e){this.items.push(e)}removeProject(e){const t=this.getProjectIndexById(e);this.items.splice(t,1)}getProject(e){const t=this.items.filter((t=>t.id===e));if(t.length>1)throw new Error(`${t.length} projects have the same id: ${e}`);return t[0]}getProjectIndexById(e){const t=this.getProject(e);return this.items.indexOf(t)}save(){const e=JSON.stringify(this);localStorage.setItem("projectList",e)}restore(){const e=localStorage.getItem("projectList");null!=e?this.fromJSON(e):console.log("localStorage is empty. Aborting")}clear(){this.items=[]}}},116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 20 20");const r=document.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=t;const o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttribute("width","20"),o.setAttribute("height","20"),o.setAttribute("href",{add:"./svg/add.svg#add",rename:"./svg/edit-pencil.svg#edit",delete:"./svg/delete.svg#delete",close:"./svg/close.svg#close",notes:"./svg/notes.svg#notes"}[e]),n.append(r,o),n}},207:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(116));t.default=function(e,t){const n=document.createElement("button");n.classList.add(`${e}-button`);const r=(0,o.default)(e,t);return n.appendChild(r),n}},262:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(429);t.default=function(e){return{title:(t=e.get("title"),null!=t&&"string"==typeof t?t:"New Project"),id:(0,r.v4)()};var t}},773:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(429);function o(e,t){return""===e||null==e?t:String(e)}t.default=function(e){const t=o(e.get("title"),"New task"),n=o(e.get("description"),""),i=(null,null==(c=e.get("dueDate"))||"string"!=typeof c||""===c?null:new Date(c));var c;const l=new Date,d=function(e,t){return["low","normal","high"].includes(e)?e:"normal"}(e.get("priority")),s=o(e.get("notes"),""),a=(0,r.v4)(),u=function(e,t){return"true"===e}(e.get("done"));return{title:t,description:n,dueDate:i,dateStarted:l,priority:d,notes:s,checklist:[],id:a,done:u}}},143:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.listTodos=t.listProjects=void 0;var c=n(840);Object.defineProperty(t,"listProjects",{enumerable:!0,get:function(){return i(c).default}});var l=n(210);Object.defineProperty(t,"listTodos",{enumerable:!0,get:function(){return i(l).default}}),o(n(460),t),o(n(456),t),o(n(275),t),o(n(784),t)},784:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.importHandler=t.exportHandler=void 0;const c=n(607),l=i(n(143));function d(e){const t=e.target,n=new FormData(t).get("import-file");n instanceof File&&n.text().then((e=>{c.projectList.fromJSON(e);const t=c.projectList.items[0].id;if(l.listTodos(t),l.listProjects(),c.projectList.items[0].items.length>0){const e=document.querySelector(".project-header .add-button");if(!(e instanceof HTMLButtonElement))throw new Error("Add button not found");e.disabled=!1}})).catch((()=>{console.error("Unable to upload a file")}))}t.exportHandler=function(){const e=localStorage.getItem("projectList")??"",t=new Blob([e],{type:"JSON text data"}),n=document.createElement("a");n.setAttribute("href",URL.createObjectURL(t)),n.setAttribute("download","export.json"),n.click()},t.importHandler=function(){const e=document.querySelector("#upload"),t=e.querySelector("form");e?.showModal(),t?.addEventListener("submit",d,{once:!0}),e.addEventListener("close",(()=>{t?.removeEventListener("submit",d)}),{once:!0})}},289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){const e=localStorage.getItem("currentProjectId");if(null==e)throw new Error("Missing current project ID");return e}},246:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=e.currentTarget;if(!(t instanceof HTMLElement))throw new Error("currentTarget not found");if(null!=t.dataset.id)return t.dataset.id;const n=t.parentElement;if(null!=n?.dataset.id)return n.dataset.id;throw new Error("ID not found")}},607:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.projectList=void 0;const c=n(395),l=i(n(143));n(463),n(387),t.projectList=new c.ProjectList;const d=document.querySelector(".export"),s=document.querySelector(".import");d?.addEventListener("click",l.exportHandler),s?.addEventListener("click",l.importHandler);const a=document.getElementById("new-todo");a?.addEventListener("click",l.newTodoBtnClickHandler);const u=document.querySelector("#new-project-form");u?.addEventListener("submit",l.newProjectHandler);const f=document.querySelector(".project-header > .rename-button"),m=document.querySelector(".project-header > .delete-button");f?.addEventListener("click",l.renameHandler),m?.addEventListener("click",l.deleteProject);const p=document.getElementById("new-project-button"),h=document.getElementById("new-project");p?.addEventListener("click",(()=>{h.showModal()}));const v=document.querySelectorAll("#close-dialog");v?.forEach((e=>{e.addEventListener("click",(()=>{if(!(e instanceof HTMLElement)||null==e.dataset.dialogId)return;const t=e.dataset.dialogId;document.getElementById(t).close()}))})),document.querySelectorAll("dialog").forEach((e=>{e.addEventListener("close",(()=>{e.querySelector("form").reset()}))})),function(){const e=localStorage.getItem("currentProjectId");t.projectList.restore(),0!==t.projectList.items.length?(l.listProjects(),null!=e?l.listTodos(e):l.listTodos(t.projectList.items[0].id)):document.querySelector(".project-header .add-button").disabled=!0}()},840:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=c(n(207)),d=n(607),s=c(n(210)),a=c(n(246)),u=i(n(143));t.default=function(){const e=document.querySelector(".projects-subarea");null!=e?(e.innerHTML="",d.projectList.items.forEach((t=>{e.appendChild(function(e){const t=document.createElement("li");t.classList.add("project");const n=document.createElement("button");n.setAttribute("data-id",String(e.id)),n.classList.add("project-name","italic"),n.innerText=e.title;const r=(0,l.default)("rename","Rename project");r.setAttribute("data-id",String(e.id));const o=(0,l.default)("delete","Delete project");return o.setAttribute("data-id",String(e.id)),t.append(n,r,o),t}(t))})),document.querySelectorAll("li.project").forEach((e=>{const t=e.querySelector(".project-name"),n=e.querySelector(".rename-button"),r=e.querySelector(".delete-button");t?.addEventListener("click",(e=>{(0,s.default)((0,a.default)(e))})),n?.addEventListener("click",u.renameHandler),r?.addEventListener("click",u.deleteProject)}))):console.error("projectArea does not exist")}},210:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=n(607),d=c(n(207)),s=i(n(143)),a=c(n(289)),u=c(n(374));t.default=function e(t){const n=document.querySelector("main > ul");null!=n&&Array.from(n.children).filter((e=>!e.classList.contains("no-todos"))).forEach((e=>{n?.removeChild(e)})),localStorage.setItem("currentProjectId",t);const r=l.projectList.getProject(t);r.items.forEach((t=>{n?.appendChild(function(t){const n=document.createElement("li");n.classList.add("todo-item"),n.setAttribute("data-id",t.id);const r=document.createElement("div");r.classList.add("container");const o=function(t){const n=document.createElement("input");return n.classList.add("checkbox-big"),n.setAttribute("type","checkbox"),n.setAttribute("name","done"),n.addEventListener("change",(n=>{const r=(0,a.default)();n.target.checked?(t.checkTodo(),e(r)):(t.uncheckTodo(),e(r))})),n.checked=t.done,n}(t),i=function(){const e=document.createElement("label");return e.setAttribute("for","done"),e.classList.add("hidden"),e.innerText="Done",e}(),c=function(e){const t=document.createElement("input");return t.classList.add("todo-name"),t.readOnly=!0,t.value=e,t}(t.title),f=function(e){const t=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","title"),r=document.createElementNS("http://www.w3.org/2000/svg","use");return t.setAttribute("viewBox","0 0 20 20"),t.classList.add("priority"),n.textContent=e.slice(0,1).toUpperCase()+e.slice(1),r.setAttribute("href",`./svg/${e}.svg#${e}`),t.append(n,r),t}(t.priority),m=function(e,t){const n=document.createElement("div");if(n.classList.add("due-date"),null==e||t)return n;const r=document.createElement("div"),o=document.createElement("div"),i=(0,u.default)(e,!0),c=e.getTime(),l=Date.now();if(r.textContent=i[0],o.textContent=i[1],n.append(r,o),c-l<0){const e=document.createElement("div");e.classList.add("overdue-notice"),e.textContent="Overdue",n.appendChild(e)}return n}(t.dueDate,t.done),p=(0,d.default)("notes","View notes"),h=(0,d.default)("add","New checklist item"),v=(0,d.default)("rename","Edit"),g=(0,d.default)("delete","Delete");if(h.addEventListener("click",s.addChecklistItem),v.addEventListener("click",s.editTodoItem),g.addEventListener("click",s.deleteTodoItem),p.addEventListener("click",s.showNotesHandler),r.append(f,o,i),t.checklist.length>0){const e=function(e,t){const n=document.createElement("div");n.classList.add("checklist");const r=document.createElement("ul");return n.appendChild(r),e.forEach((e=>n.appendChild(function(e,t){const n=document.createElement("li");n.setAttribute("data-index",String(e.index)),n.setAttribute("data-id",t);const r=document.createElement("input");r.setAttribute("type","checkbox"),r.classList.add("checkbox-small"),r.addEventListener("change",(n=>{const r=n.target,o=(0,a.default)(),i=l.projectList.getProject(o).getItem(t);r.checked?i.checklistCheckItem(e.index):i.checklistUncheckItem(e.index)})),r.checked=e.completed;const o=document.createElement("label");o.innerText=e.text;const i=(0,d.default)("close","Remove"),c=(0,d.default)("rename","Rename");return i.addEventListener("click",s.deleteChecklistItem),c.addEventListener("click",s.renameChecklistItem),n.append(r,o,c,i),n}(e,t)))),n}(t.checklist,t.id);return n.append(r,c,m,p,h,v,g,e),n}return n.append(r,c,m,p,h,v,g),n}(t))}));const o=document.querySelector(".project-header > h2"),i=document.querySelector(".project-header > .rename-button"),c=document.querySelector(".project-header > .delete-button");o.innerText=r.title,i?.setAttribute("data-id",t),c?.setAttribute("data-id",t)}},374:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t=!1){const n=e.getFullYear(),r=e=>{const t=String(e);return 1===t.length?"0"+t:t},o=r(e.getMonth()+1),i=r(e.getDate()),c=r(e.getHours()),l=r(e.getMinutes());return t?[`${i}/${o}/${n}`,`${c}:${l}`]:`${n}-${o}-${i}T${c}:${l}`}},460:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.newProjectHandler=t.deleteProject=t.renameHandler=void 0;const l=n(607),d=c(n(262)),s=c(n(246)),a=i(n(143)),u=n(395),f=c(n(289));t.renameHandler=function(e){if(0===l.projectList.items.length)return void console.log("No projects available. Aborting");const t=(0,s.default)(e),n=l.projectList.getProject(t).title,r=document.querySelector("#rename-project"),o=r.querySelector("input");null!=o&&(o.value=n),o?.addEventListener("focus",(()=>{o.selectionStart=o.selectionEnd=o.value.length})),r?.showModal(),document.querySelector("#rename-project-form").addEventListener("submit",(e=>{!function(e,t){const n=e.target;if(null==n||!(n instanceof HTMLFormElement))return void console.error("renameProject: something went wrong");const r=new FormData(n).get("title");if(null==r||r.length<1)return void console.error(`Illegal title: ${r}`);l.projectList.getProject(t).title=r,l.projectList.save(),a.listProjects();const o=document.querySelector(".project-header > h2");t===localStorage.getItem("currentProjectId")&&null!=o&&(o.textContent=r),n.reset()}(e,t)}),{once:!0})},t.deleteProject=function(e){const t=e.currentTarget.dataset.id,n=localStorage.getItem("currentProjectId");if(null==n)return void console.log("No projects available. Aborting.");const r=l.projectList.getProjectIndexById(t),o=l.projectList.getProject(t).title;if(confirm(`Are you sure you want to delete ${o}`)){if(t===n&&l.projectList.items.length>1){const e=l.projectList.items.length>r+1?r+1:r-1,t=l.projectList.items[e].id;localStorage.setItem("currentProjectId",t),a.listTodos(t)}if(1===l.projectList.items.length){localStorage.removeItem("currentProjectId");const e=document.querySelector(".project-header .add-button"),t=document.querySelector("main > ul"),n=document.querySelector(".project-header h2");if(null==n)throw new Error("title bar not found");n.textContent="",e.disabled=!0,null!=t&&Array.from(t.children).filter((e=>!e.classList.contains("no-todos"))).forEach((e=>{t?.removeChild(e)}))}l.projectList.removeProject(t),l.projectList.save(),a.listProjects()}},t.newProjectHandler=function(e){const t=e.target,n=new FormData(t),{title:r,id:o}=(0,d.default)(n),i=new u.Project(r,o);localStorage.setItem("currentProjectId",o),0===l.projectList.items.length&&(document.querySelector(".project-header .add-button").disabled=!1),l.projectList.addProject(i),l.projectList.save(),t.reset(),a.listProjects(),a.listTodos((0,f.default)())}},275:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.showNotesHandler=t.deleteTodoItem=t.editTodoHandler=t.editTodoItem=t.newTodoBtnClickHandler=t.createTodoHandler=void 0;const o=r(n(773)),i=n(607),c=n(395),l=n(143),d=r(n(374)),s=r(n(289)),a=r(n(246));function u(e){const t=e.target,n=new FormData(t),r=(0,o.default)(n),d=(0,s.default)();i.projectList.getProject(d).addItem(new c.TodoItem(r)),i.projectList.save(),t.reset(),(0,l.listTodos)(d)}function f(e,t){const n=t.target,r=new FormData(n),c=(0,o.default)(r),d=(0,s.default)();i.projectList.getProject(d).getItem(e).updateFields(c),i.projectList.save(),(0,l.listTodos)(d)}function m(e){const t=e.target,n=new FormData(t).get("notes");if("string"==typeof n)return this.updataNotes(n),void i.projectList.save();throw new Error("Could not retrieve notes from form")}t.createTodoHandler=u,t.newTodoBtnClickHandler=function(){const e=document.getElementById("new-todo-dialog"),t=document.querySelector("#create-todo"),n=e.querySelector('input[name="dateStarted"]'),r=e.querySelector("form");if(n instanceof HTMLInputElement){const e=new Date,t=(0,d.default)(e);"string"==typeof t&&(n.value=t)}t.textContent="Create todo",r?.addEventListener("submit",u,{once:!0}),e.addEventListener("close",(()=>{r?.removeEventListener("submit",u)}),{once:!0}),e.showModal()},t.editTodoItem=function(e){const t=document.querySelector("#new-todo-dialog"),n=t?.querySelector("#create-todo"),r=t?.querySelector("form"),o=(0,a.default)(e);if(!(t instanceof HTMLDialogElement&&n instanceof HTMLButtonElement))throw new Error("Dialog or button not found");!function(e,t){const n=(0,s.default)(),r=i.projectList.getProject(n).getItem(e),o=t.querySelector('input[name="title"]'),c=t.querySelector('input[name="description"]'),l=t.querySelector('input[name="dueDate"]'),a=t.querySelector('input[name="dateStarted"]'),u=t.querySelector(`fieldset input[value="${r.priority}"]`),f=t.querySelector("textarea");if(o.value=r.title,c.value=r.description,null!=r.dueDate){const e=(0,d.default)(r.dueDate);"string"==typeof e&&(l.value=e)}const m=(0,d.default)(r.dateStarted);"string"==typeof m&&(a.value=m),u.checked=!0,f.value=r.notes}(o,t),n.textContent="Save";const c=f.bind({},o);r?.addEventListener("submit",c,{once:!0}),t.addEventListener("close",(()=>{r?.removeEventListener("submit",c)}),{once:!0}),t.showModal()},t.editTodoHandler=f,t.deleteTodoItem=function(e){const t=e.currentTarget,n=t.parentElement?.dataset.id;if(null==n)return;const r=confirm("Are you sure?"),o=(0,s.default)();r&&(i.projectList.getProject(o).removeItem(n),i.projectList.save(),(0,l.listTodos)(o))},t.showNotesHandler=function(e){const t=(0,a.default)(e),n=(0,s.default)(),r=i.projectList.getProject(n).getItem(t),o=r.notes,c=document.querySelector("#notes-dialog");if(!(c instanceof HTMLDialogElement))throw new Error("Dialog not found");const l=c.querySelector("form"),d=c.querySelector("textarea");if(!(d instanceof HTMLTextAreaElement))throw new Error("Textarea not found");d.value=o;const u=m.bind(r);c.showModal(),l?.addEventListener("submit",u,{once:!0}),c.addEventListener("close",(()=>{l?.removeEventListener("submit",u)}),{once:!0})}},429:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return d.default}});var r=f(n(990)),o=f(n(237)),i=f(n(355)),c=f(n(764)),l=f(n(314)),d=f(n(464)),s=f(n(435)),a=f(n(8)),u=f(n(222));function f(e){return e&&e.__esModule?e:{default:e}}},163:(e,t)=>{function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,c){return r((l=r(r(t,e),r(o,c)))<<(d=i)|l>>>32-d,n);var l,d}function i(e,t,n,r,i,c,l){return o(t&n|~t&r,e,t,i,c,l)}function c(e,t,n,r,i,c,l){return o(t&r|n&~r,e,t,i,c,l)}function l(e,t,n,r,i,c,l){return o(t^n^r,e,t,i,c,l)}function d(e,t,n,r,i,c,l){return o(n^(t|~r),e,t,i,c,l)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=e[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let o=1732584193,s=-271733879,a=-1732584194,u=271733878;for(let t=0;t<e.length;t+=16){const n=o,f=s,m=a,p=u;o=i(o,s,a,u,e[t],7,-680876936),u=i(u,o,s,a,e[t+1],12,-389564586),a=i(a,u,o,s,e[t+2],17,606105819),s=i(s,a,u,o,e[t+3],22,-1044525330),o=i(o,s,a,u,e[t+4],7,-176418897),u=i(u,o,s,a,e[t+5],12,1200080426),a=i(a,u,o,s,e[t+6],17,-1473231341),s=i(s,a,u,o,e[t+7],22,-45705983),o=i(o,s,a,u,e[t+8],7,1770035416),u=i(u,o,s,a,e[t+9],12,-1958414417),a=i(a,u,o,s,e[t+10],17,-42063),s=i(s,a,u,o,e[t+11],22,-1990404162),o=i(o,s,a,u,e[t+12],7,1804603682),u=i(u,o,s,a,e[t+13],12,-40341101),a=i(a,u,o,s,e[t+14],17,-1502002290),s=i(s,a,u,o,e[t+15],22,1236535329),o=c(o,s,a,u,e[t+1],5,-165796510),u=c(u,o,s,a,e[t+6],9,-1069501632),a=c(a,u,o,s,e[t+11],14,643717713),s=c(s,a,u,o,e[t],20,-373897302),o=c(o,s,a,u,e[t+5],5,-701558691),u=c(u,o,s,a,e[t+10],9,38016083),a=c(a,u,o,s,e[t+15],14,-660478335),s=c(s,a,u,o,e[t+4],20,-405537848),o=c(o,s,a,u,e[t+9],5,568446438),u=c(u,o,s,a,e[t+14],9,-1019803690),a=c(a,u,o,s,e[t+3],14,-187363961),s=c(s,a,u,o,e[t+8],20,1163531501),o=c(o,s,a,u,e[t+13],5,-1444681467),u=c(u,o,s,a,e[t+2],9,-51403784),a=c(a,u,o,s,e[t+7],14,1735328473),s=c(s,a,u,o,e[t+12],20,-1926607734),o=l(o,s,a,u,e[t+5],4,-378558),u=l(u,o,s,a,e[t+8],11,-2022574463),a=l(a,u,o,s,e[t+11],16,1839030562),s=l(s,a,u,o,e[t+14],23,-35309556),o=l(o,s,a,u,e[t+1],4,-1530992060),u=l(u,o,s,a,e[t+4],11,1272893353),a=l(a,u,o,s,e[t+7],16,-155497632),s=l(s,a,u,o,e[t+10],23,-1094730640),o=l(o,s,a,u,e[t+13],4,681279174),u=l(u,o,s,a,e[t],11,-358537222),a=l(a,u,o,s,e[t+3],16,-722521979),s=l(s,a,u,o,e[t+6],23,76029189),o=l(o,s,a,u,e[t+9],4,-640364487),u=l(u,o,s,a,e[t+12],11,-421815835),a=l(a,u,o,s,e[t+15],16,530742520),s=l(s,a,u,o,e[t+2],23,-995338651),o=d(o,s,a,u,e[t],6,-198630844),u=d(u,o,s,a,e[t+7],10,1126891415),a=d(a,u,o,s,e[t+14],15,-1416354905),s=d(s,a,u,o,e[t+5],21,-57434055),o=d(o,s,a,u,e[t+12],6,1700485571),u=d(u,o,s,a,e[t+3],10,-1894986606),a=d(a,u,o,s,e[t+10],15,-1051523),s=d(s,a,u,o,e[t+1],21,-2054922799),o=d(o,s,a,u,e[t+8],6,1873313359),u=d(u,o,s,a,e[t+15],10,-30611744),a=d(a,u,o,s,e[t+6],15,-1560198380),s=d(s,a,u,o,e[t+13],21,1309151649),o=d(o,s,a,u,e[t+4],6,-145523070),u=d(u,o,s,a,e[t+11],10,-1120210379),a=d(a,u,o,s,e[t+2],15,718787259),s=d(s,a,u,o,e[t+9],21,-343485551),o=r(o,n),s=r(s,f),a=r(a,m),u=r(u,p)}return[o,s,a,u]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},790:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},314:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},222:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(435))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},58:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},319:(e,t)=>{let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},757:(e,t)=>{function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,c=Math.ceil(i/16),l=new Array(c);for(let t=0;t<c;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];l[t]=n}l[c-1][14]=8*(e.length-1)/Math.pow(2,32),l[c-1][14]=Math.floor(l[c-1][14]),l[c-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<c;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=l[e][t];for(let e=16;e<80;++e)i[e]=r(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let c=o[0],d=o[1],s=o[2],a=o[3],u=o[4];for(let e=0;e<80;++e){const o=Math.floor(e/20),l=r(c,5)+n(o,d,s,a)+u+t[o]+i[e]>>>0;u=a,a=s,s=r(d,30)>>>0,d=c,c=l}o[0]=o[0]+c>>>0,o[1]=o[1]+d>>>0,o[2]=o[2]+s>>>0,o[3]=o[3]+a>>>0,o[4]=o[4]+u>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},8:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=c;var r,o=(r=n(435))&&r.__esModule?r:{default:r};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function c(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}t.default=function(e,t=0){const n=c(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(319))&&r.__esModule?r:{default:r},i=n(8);let c,l,d=0,s=0;t.default=function(e,t,n){let r=t&&n||0;const a=t||new Array(16);let u=(e=e||{}).node||c,f=void 0!==e.clockseq?e.clockseq:l;if(null==u||null==f){const t=e.random||(e.rng||o.default)();null==u&&(u=c=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==f&&(f=l=16383&(t[6]<<8|t[7]))}let m=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:s+1;const h=m-d+(p-s)/1e4;if(h<0&&void 0===e.clockseq&&(f=f+1&16383),(h<0||m>d)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=m,s=p,l=f,m+=122192928e5;const v=(1e4*(268435455&m)+p)%4294967296;a[r++]=v>>>24&255,a[r++]=v>>>16&255,a[r++]=v>>>8&255,a[r++]=255&v;const g=m/4294967296*1e4&268435455;a[r++]=g>>>8&255,a[r++]=255&g,a[r++]=g>>>24&15|16,a[r++]=g>>>16&255,a[r++]=f>>>8|128,a[r++]=255&f;for(let e=0;e<6;++e)a[r+e]=u[e];return t||(0,i.unsafeStringify)(a)}},237:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(925)),o=i(n(163));function i(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.default)("v3",48,o.default);t.default=c},925:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,c,l){var d;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,i.default)(r)),16!==(null===(d=r)||void 0===d?void 0:d.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,c){l=l||0;for(let e=0;e<16;++e)c[l+e]=s[e];return c}return(0,o.unsafeStringify)(s)}try{r.name=e}catch(e){}return r.DNS=c,r.URL=l,r};var r,o=n(8),i=(r=n(222))&&r.__esModule?r:{default:r};const c="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=c;const l="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=l},355:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(790)),o=c(n(319)),i=n(8);function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const c=(e=e||{}).random||(e.rng||o.default)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=c[e];return t}return(0,i.unsafeStringify)(c)}},764:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(925)),o=i(n(757));function i(e){return e&&e.__esModule?e:{default:e}}var c=(0,r.default)("v5",80,o.default);t.default=c},435:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(58))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},464:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(435))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})();